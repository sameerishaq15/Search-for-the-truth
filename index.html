
<script>
    async function askAI() {
        // Aapki API Key (Yahan apni sahi key check karein)
        const API_KEY = "AIzaSyAeFW5agl2afE_r_2nevv3tsWGWVCrR0nk"; 
        const q = document.getElementById('userQ').value;
        const loader = document.getElementById('loader');
        const area = document.getElementById('responseArea');
        const aiText = document.getElementById('aiText');

        if(!q) {
            alert("Please enter a question!");
            return;
        }

        loader.style.display = 'block';
        area.style.display = 'none';
        aiText.innerText = ""; // Purana text saaf karne ke liye

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{ 
                        parts: [{ 
                            text: "You are an Islamic scholar. Answer this question in the same language it was asked, providing references from Quran and Sahih Hadees: " + q 
                        }] 
                    }]
                })
            });

            const data = await response.json();
            console.log("Full API Response:", data); // Isse error browser console mein dikhega

            if (data.error) {
                aiText.innerText = "API Error: " + data.error.message;
            } else if (data.candidates && data.candidates[0].content) {
                aiText.innerText = data.candidates[0].content.parts[0].text;
            } else {
                aiText.innerText = "Koshish nakam rahi. Shayad API key limit khatam ho gayi hai.";
            }
        } catch (error) {
            console.error("Fetch Error:", error);
            aiText.innerText = "Technical error: Connection nahi ho pa raha.";
        }
        
        loader.style.display = 'none';
        area.style.display = 'block';
    }
</script>
